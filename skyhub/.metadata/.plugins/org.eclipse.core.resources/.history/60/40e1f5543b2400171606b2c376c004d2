package com.technicalyorker.codetest.skyhubdigital.recommendation;

import com.technicalyorker.codetest.skyhubdigital.recommendation.model.Movie;

public class TwoMovies implements Comparable<TwoMovies> {
	private Movie movie1;
	private Movie movie2;

	public TwoMovies(Movie movie1, Movie movie2) {
		super();
		if (movie1.getOriginalTitle().compareTo(movie2.getOriginalTitle()) > 0) {
			this.movie2 = movie1;
			this.movie1 = movie2;
			return;
		}
		this.movie1 = movie1;
		this.movie2 = movie2;
	}

	public Integer getTime() {
		return movie1.getRuntime() + movie2.getRuntime();
	}

	@Override
	public int compareTo(TwoMovies anotherTwoMovies) {
		Integer compare = anotherTwoMovies.getTime().compareTo(this.getTime());
		if (compare == 0) {
			return (anotherTwoMovies.movie1.getOriginalTitle() + this.movie1.getOriginalTitle())
					.compareTo(anotherTwoMovies.movie2.getOriginalTitle() + this.movie2.getOriginalTitle());
		}
		return compare;
	}

	@Override
	public String toString() {
		return movie1.getOriginalTitle() + "(" + movie1.getRuntime() + ")  " + movie2.getOriginalTitle() + "("
				+ movie2.getRuntime() + ")   " + getTime();
	}

	@Override
	public int hashCode() {
		final int prime = 31;
		int result = 1;
		result = prime * result + ((movie1 == null) ? 0 : movie1.getOriginalTitle().hashCode());
		result = prime * result + ((movie2 == null) ? 0 : movie2.getOriginalTitle().hashCode());
		return result;
	}

	@Override
	public boolean equals(Object obj) {
		if (this == obj)
			return true;
		if (obj == null)
			return false;
		if (getClass() != obj.getClass())
			return false;
		TwoMovies other = (TwoMovies) obj;
		if (movie1 == null) {
			if (other.movie1 != null)
				return false;
		} else if (!movie1.getOriginalTitle().equals(other.movie1.getOriginalTitle()))
			return false;
		if (movie2 == null) {
			if (other.movie2 != null)
				return false;
		} else if (!movie2.getOriginalTitle().equals(other.movie2.getOriginalTitle()))
			return false;
		return true;
	}
}
